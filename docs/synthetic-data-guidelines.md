# Synthetic Data Generation Guidelines

This document provides clear specifications for generating synthetic medical data for the RSNA2025_DLL_AgenticAI demo project. Follow these guidelines to ensure the data is properly structured and compatible with the application.

## Directory Structure

The synthetic data should be organized in the following directory structure:

```
frontend/public/demo-data/
├── ehr_data/
│   └── patient_context.json
├── prior_reports/
│   └── report_YYYY_MM_DD.md (multiple files)
├── guidelines/
│   └── [guideline files will be provided separately]
├── style_guide/
│   └── [style guide markdown file]
└── medical_imaging/
    ├── ct_scan_config.json
    └── ct_scan.nii.gz (not generated by LLM)
```

---

## 1. EHR Data - `patient_context.json`

**Location:** `frontend/public/demo-data/ehr_data/patient_context.json`

**Format:** JSON file

**Required Structure:**

The JSON file must follow this exact structure with all required fields:

```json
{
  "demographics": {
    "age": <integer>,
    "sex": "<string>",
    "mrn": "<string>",
    "dob": "<string in YYYY-MM-DD format>"
  },
  "labResults": [
    {
      "test": "<string>",
      "value": "<string>",
      "unit": "<string>",
      "date": "<string in YYYY-MM-DD format>",
      "normalRange": "<string>"
    }
  ],
  "medications": [
    {
      "name": "<string>",
      "dose": "<string>",
      "frequency": "<string>",
      "indication": "<string>"
    }
  ],
  "clinicalNotes": [
    {
      "date": "<string in YYYY-MM-DD format>",
      "provider": "<string>",
      "specialty": "<string>",
      "note": "<string>"
    }
  ],
  "allergies": [
    {
      "allergen": "<string>",
      "reaction": "<string>"
    }
  ],
  "pastMedicalHistory": [
    "<string>",
    "<string>"
  ]
}
```

### Field Specifications

#### `demographics`
- **age**: Integer representing patient age in years
- **sex**: String (e.g., "Male", "Female", "Other")
- **mrn**: String representing Medical Record Number (e.g., "MRN-12345")
- **dob**: String in ISO date format YYYY-MM-DD (e.g., "1959-03-15")

#### `labResults` (Array)
Each lab result object must contain:
- **test**: String with test name (e.g., "WBC", "Hemoglobin", "Creatinine", "Glucose")
- **value**: String representation of the numeric value (e.g., "7.2", "14.5")
- **unit**: String with unit of measurement (e.g., "K/μL", "g/dL", "mg/dL")
- **date**: String in ISO date format YYYY-MM-DD
- **normalRange**: String showing normal range (e.g., "4.0-11.0", "13.5-17.5")

**Note:** Include multiple lab results with different dates to show trends over time. Values should be realistic and consistent with the patient's medical history.

#### `medications` (Array)
Each medication object must contain:
- **name**: String with medication name (e.g., "Aspirin", "Metformin", "Lisinopril")
- **dose**: String with dosage (e.g., "81mg", "500mg", "10mg")
- **frequency**: String describing frequency (e.g., "daily", "twice daily", "BID")
- **indication**: String describing why the medication is prescribed (e.g., "Cardiovascular protection", "Type 2 Diabetes", "Hypertension")

#### `clinicalNotes` (Array)
Each clinical note object must contain:
- **date**: String in ISO date format YYYY-MM-DD
- **provider**: String with provider name (e.g., "Dr. Smith", "Dr. Johnson")
- **specialty**: String with medical specialty (e.g., "Primary Care", "Endocrinology", "Cardiology")
- **note**: String with the clinical note content. Should be realistic and relevant to the patient's condition.

**Note:** Include multiple clinical notes from different dates and providers to show a timeline of care.

#### `allergies` (Array)
Each allergy object must contain:
- **allergen**: String with allergen name (e.g., "Penicillin", "Latex", "Shellfish")
- **reaction**: String describing the reaction (e.g., "Rash", "Anaphylaxis", "Hives")

**Note:** If the patient has no known allergies, use an empty array `[]`.

#### `pastMedicalHistory` (Array)
Array of strings, each describing a past medical condition or procedure. Examples:
- "Type 2 Diabetes"
- "Hypertension"
- "Hyperlipidemia"
- "History of colon cancer (2018, status post resection)"

### Data Consistency Requirements

1. **Dates**: All dates must be in YYYY-MM-DD format and should be chronologically consistent (e.g., clinical notes should not be dated after lab results if they reference those results).

2. **Medical Consistency**: 
   - Lab values should be consistent with medications (e.g., if patient is on diabetes medication, glucose values should reflect that)
   - Clinical notes should reference relevant medications, lab results, and medical history
   - Medications should align with past medical history (e.g., diabetes medications for diabetic patients)

3. **Realistic Values**: 
   - Lab values should fall within medically plausible ranges
   - Normal ranges should match standard medical reference ranges
   - Medication dosages should be realistic and commonly prescribed amounts

### Example Structure Reference

See the existing example at `frontend/public/demo-data/ehr_data/patient_context.json` for a complete working example.

---

## 2. Prior Reports - Markdown Files

**Location:** `frontend/public/demo-data/prior_reports/`

**Format:** Markdown files (`.md`)

**Naming Convention:** `report_YYYY_MM_DD.md` (e.g., `report_2023_11_10.md`, `report_2024_01_15.md`)

**Content:** These are historical radiology reports. The format is flexible, but they should be realistic medical imaging reports. See existing examples in the `prior_reports/` directory for reference.

**Note:** The content and structure of these reports can be flexible. Focus on creating realistic medical imaging report content that would be relevant to the patient's case.

---

## 3. Style Guide - Markdown File

**Location:** `frontend/public/demo-data/style_guide/`

**Format:** Markdown file (`.md`)

**Content:** This file should contain style guidelines for report writing. The format and content are flexible - create realistic style guide content that would guide how medical reports should be written.

**Note:** The specific content and structure can be flexible. Focus on creating realistic style guide content.

---

## 4. Guidelines - Markdown Files

**Location:** `frontend/public/demo-data/guidelines/`

**Format:** Markdown files (`.md`)

**Note:** The guidelines will be provided separately. You do not need to generate these files. This directory exists for reference only.

---

## 5. Medical Imaging Configuration - `ct_scan_config.json`

**Location:** `frontend/public/demo-data/medical_imaging/ct_scan_config.json`

**Format:** JSON file

**Structure:**

```json
[
  {
    "file_path": "/demo-data/medical_imaging/ct_scan.nii.gz",
    "rescale_intercept": <integer>,
    "rescale_slope": <number>
  }
]
```

**Note:** The actual CT scan file (`ct_scan.nii.gz`) is not generated by the LLM. Only generate the configuration JSON file if needed. The `rescale_intercept` and `rescale_slope` values are typically -1024 and 1 respectively for CT scans, but should match the actual imaging data if provided.

---

## Summary Checklist

When generating synthetic data, ensure:

- [ ] `patient_context.json` follows the exact JSON structure specified above
- [ ] All dates are in YYYY-MM-DD format
- [ ] All required fields are present in each object
- [ ] Data is medically consistent (lab values match medications, clinical notes reference relevant data)
- [ ] Values are realistic and within medically plausible ranges
- [ ] Prior reports are created as markdown files with appropriate naming (`report_YYYY_MM_DD.md`)
- [ ] Style guide is created as a markdown file
- [ ] All JSON is valid and properly formatted

---

## Important Notes

1. **JSON Validation**: Ensure all JSON files are valid and can be parsed by standard JSON parsers.

2. **Date Consistency**: Pay attention to chronological order - clinical notes and lab results should have dates that make sense relative to each other and the patient's medical history.

3. **Medical Accuracy**: While this is synthetic data, it should be medically plausible and internally consistent.

4. **File Paths**: When referencing files in JSON (like in `ct_scan_config.json`), use the path format shown in the examples.

5. **Character Encoding**: Use UTF-8 encoding for all text files.

